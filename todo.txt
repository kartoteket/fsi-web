

Møte 23.10 fra 12 til 13:15


TODO, til tirsdag:
. legge inn alle slides med overskrifter
. teste mørke kart igjen
. legg til slide "4/30"
. Avgrens zoom til range 2-7
. sette color scheme til 5-class YlOrRd
. la bargraphen vis FSI-value (440 - 1400), med fargekoding for Score. Endre Rank til "Plassering", X-axs lablel "FAI-verdi"
.Storbritannia: streker til alle relaterte stater (blå og lyseblå i PDF)
. Legge til Logo på kartet på første  og siste side (sentrert under slides)
. legge til pilatester (venstre/opp = tilbake | høyre/ned = frem)



scp /Users/svale/Downloads/fsi.sql www-deploy@berlin.pipalbot.com:/var/www/no.taxjustice.fsi2015/db
mysql -u tjnn_db -p tjnn < /var/www/no.taxjustice.fsi2015/db/fsi.sql
WPTbN7xkCRCAk7

==============

For å rulle sin egen geojson (og topojson) topo/world-10m.json
Se også: http://bost.ocks.org/mike/map/

==== alle:

ogr2ogr  -f GeoJSON -where "ADM0_A3 IN ('AND', 'AIA', 'ATG', 'ABW', 'AUS', 'AUT', 'BHS', 'BHR', 'BRB', 'BEL', 'BLZ', 'BMU', 'BOL', 'BWA', 'BRA', 'VGB', 'BRN', 'CAN', 'CYM', 'CHL', 'CHN', 'COK', 'CRI', 'CUW', 'CYP', 'CZE', 'DNK', 'DMA', 'DOM', 'EST', 'FIN', 'FRA', 'GMB', 'DEU', 'GHA', 'GIB', 'GRC', 'GRD', 'GTM', 'GGY', 'HKG', 'HUN', 'ISL', 'IND', 'IRL', 'IMN', 'ISR', 'ITA', 'JPN', 'JEY', 'KOR', 'LVA', 'LBN', 'LBR', 'LIE', 'LUX', 'MAC', 'MKD', 'MYS', 'MDV', 'MLT', 'MHL', 'MUS', 'MEX', 'MCO', 'MNE', 'MSR', 'NRU', 'NLD', 'NZL', 'NOR', 'PAN', 'PRY', 'PHL', 'POL', 'PRT', 'RUS', 'KNA', 'LCA', 'VCT', 'WSM', 'SMR', 'SAU', 'SYC', 'SGP', 'SVK', 'SVN', 'ZAF', 'ESP', 'SWE', 'CHE', 'TWN', 'TZA', 'TUR', 'TCA', 'VIR', 'USA', 'ARE', 'GBR', 'URY', 'VUT', 'VEN')" subunits.json Downloads/ne_10m_admin_0_map_subunits/ne_10m_admin_0_map_subunits.shp

ogr2ogr  -f GeoJSON -where "ADM0_A3 IN ('AND', 'AIA', 'ATG', 'ABW', 'AUS', 'AUT', 'BHS', 'BHR', 'BRB', 'BEL', 'BLZ', 'BMU', 'BOL', 'BWA', 'BRA', 'VGB', 'BRN', 'CAN', 'CYM', 'CHL', 'CHN', 'COK', 'CRI', 'CUW', 'CYP', 'CZE', 'DNK', 'DMA', 'DOM', 'EST', 'FIN', 'FRA', 'GMB', 'DEU', 'GHA', 'GIB', 'GRC', 'GRD', 'GTM', 'GGY', 'HKG', 'HUN', 'ISL', 'IND', 'IRL', 'IMN', 'ISR', 'ITA', 'JPN', 'JEY', 'KOR', 'LVA', 'LBN', 'LBR', 'LIE', 'LUX', 'MAC', 'MKD', 'MYS', 'MDV', 'MLT', 'MHL', 'MUS', 'MEX', 'MCO', 'MNE', 'MSR', 'NRU', 'NLD', 'NZL', 'NOR', 'PAN', 'PRY', 'PHL', 'POL', 'PRT', 'KNA', 'LCA', 'VCT', 'WSM', 'SMR', 'SAU', 'SYC', 'SGP', 'SVK', 'SVN', 'ZAF', 'ESP', 'SWE', 'CHE', 'TWN', 'TZA', 'TUR', 'TCA', 'VIR', 'USA', 'ARE', 'GBR', 'URY', 'VUT', 'VEN')" subunits.json /Users/svale/Repositories/world-atlas/shp/ne_50m_admin_0_countries.shp


topojson -o all.json --id-property SU_A3 --properties name=NAME -- subunits.json

==== top 10:

# download and make shp-file
make topo/world-10m.json

# create geojson file with filter
ogr2ogr  -f GeoJSON -where "ADM0_A3 IN ('CHE', 'HKG', 'USA', 'SGP', 'CYM', 'LUX', 'LBN', 'DEU', 'BHR', 'ARE')" subunits1.json Downloads/ne_10m_admin_0_map_subunits/ne_10m_admin_0_map_subunits.shp
ogr2ogr  -f GeoJSON -where "ADM0_A3 IN ('CHE', 'HKG', 'USA', 'SGP', 'CYM', 'LUX', 'LBN', 'DEU', 'BHR', 'ARE')" subunits.json /Users/svale/Repositories/world-atlas/shp/ne_50m_admin_0_countries.shp

#create topojson from geojson
topojson -o top10.json --id-property SU_A3 --properties name=NAME -- subunits.json



========

ogr2ogr  -f GeoJSON -where "ADM0_A3 IN ('CHE', 'HKG', 'USA', 'SGP', 'CYM', 'LUX', 'LBN', 'DEU', 'BHR', 'ARE')" subunits.json /Users/svale/Repositories/world-atlas/shp/ne_110m_admin_0_countries.shp



=========================

Andre Geojson filer:
https://github.com/johan/world.geo.json
https://gist.github.com/markmarkoh/2969317

=========================


Første versjon 15. oktober

--------------

. finne / lage custom markers
     => https://github.com/lvoogdt/Leaflet.awesome-markers

. Lage typer "slides"
    -> vanlig text + lokasjon
    -> pepre med markører
    X statistiske (kloropleth)

. time overganger (avstander og duratiom)

X style tekst-elementet
X teste med ande map-tiles
X animire endringer til tekstboksen (fra kvadratisk i sentrum til lodrett på sida ?)
X legge inn et statistikk-lag (fsi-talla)
X kople på d3
X lagt til animering av posisjon / størrelse 
X et generisk system for animert posisjonering

==================================

 * Spm:
  - hvordan skal vi rangere, etter score, eller value (rank)


==================================

FSI 205, json til DB (craft_content)

[{"col1":"1","col2":"Switzerland","col3":"1466.1","col4":"73","col5":"5.625","col6":"2"}, {"col1":"2","col2":"Hong Kong","col3":"1259.4","col4":"72","col5":"3.842","col6":"2"}, {"col1":"3","col2":"USA","col3":"1254.8","col4":"60","col5":"19.603","col6":"2"}, {"col1":"4","col2":"Singapore","col3":"1147.1","col4":"69","col5":"4.28","col6":"2"}, {"col1":"5","col2":"Cayman Islands","col3":"1013.2","col4":"65","col5":"4.857","col6":"1,2"}, {"col1":"6","col2":"Luxembourg","col3":"817","col4":"55","col5":"11.63","col6":"2"}, {"col1":"7","col2":"Lebanon","col3":"760.2","col4":"79","col5":"0.377","col6":"2"}, {"col1":"8","col2":"Germany","col3":"701.9","col4":"56","col5":"6.026","col6":"2"}, {"col1":"9","col2":"Bahrain","col3":"471.4","col4":"74","col5":"0.164","col6":"2"}, {"col1":"10","col2":"United Arab Emirates (Dubai)","col3":"440.8","col4":"77","col5":"0.085","col6":"2,3"}, {"col1":"11","col2":"Macao","col3":"420.2","col4":"70","col5":"0.188","col6":""}, {"col1":"12","col2":"Japan","col3":"418.4","col4":"58","col5":"1.062","col6":"2"}, {"col1":"13","col2":"Panama","col3":"415.7","col4":"72","col5":"0.132","col6":"2"}, {"col1":"14","col2":"Marshall Islands","col3":"405.6","col4":"79","col5":"0.053","col6":""}, {"col1":"15","col2":"United Kingdom","col3":"380.2","col4":"41","col5":"17.394","col6":"1,2"}, {"col1":"16","col2":"Jersey","col3":"354","col4":"65","col5":"0.216","col6":"2"}, {"col1":"17","col2":"Guernsey","col3":"339.4","col4":"64","col5":"0.231","col6":""}, {"col1":"18","col2":"Malaysia (Labuan)","col3":"338.7","col4":"75","col5":"0.05","col6":"3"}, {"col1":"19","col2":"Turkey","col3":"320.9","col4":"64","col5":"0.182","col6":""}, {"col1":"20","col2":"China","col3":"312.2","col4":"54","col5":"0.743","col6":""}, {"col1":"21","col2":"British Virgin Islands","col3":"307.7","col4":"60","col5":"0.281","col6":"1,2"}, {"col1":"22","col2":"Barbados","col3":"298.3","col4":"78","col5":"0.024","col6":""}, {"col1":"23","col2":"Mauritius","col3":"297","col4":"72","col5":"0.049","col6":"1"}, {"col1":"24","col2":"Austria","col3":"295.3","col4":"54","col5":"0.692","col6":"2"}, {"col1":"25","col2":"Bahamas","col3":"273.1","col4":"79","col5":"0.017","col6":"1"}, {"col1":"26","col2":"Brazil","col3":"263.7","col4":"52","col5":"0.678","col6":"2"}, {"col1":"27","col2":"Malta","col3":"260.9","col4":"50","col5":"0.99","col6":""}, {"col1":"28","col2":"Uruguay","col3":"255.6","col4":"71","col5":"0.037","col6":"2"}, {"col1":"29","col2":"Canada","col3":"251.8","col4":"46","col5":"1.785","col6":"2"}, {"col1":"30","col2":"Russia","col3":"243.3","col4":"54","col5":"0.397","col6":""}, {"col1":"31","col2":"France","col3":"241.9","col4":"43","col5":"3.104","col6":""}, {"col1":"32","col2":"Isle of Man","col3":"228.6","col4":"64","col5":"0.068","col6":"1"}, {"col1":"33","col2":"Liberia","col3":"218.2","col4":"83","col5":"0.006","col6":"2"}, {"col1":"34","col2":"Bermuda","col3":"217.7","col4":"66","col5":"0.042","col6":"1"}, {"col1":"35","col2":"Cyprus","col3":"213.9","col4":"50","col5":"0.518","col6":""}, {"col1":"36","col2":"Liechtenstein","col3":"202.4","col4":"76","col5":"0.01","col6":""}, {"col1":"37","col2":"Ireland","col3":"187.4","col4":"40","col5":"2.313","col6":"2"}, {"col1":"38","col2":"Belgium","col3":"181.2","col4":"41","col5":"1.863","col6":"2"}, {"col1":"39","col2":"Guatemala","col3":"177.2","col4":"76","col5":"0.007","col6":"2"}, {"col1":"40","col2":"Israel","col3":"173.8","col4":"53","col5":"0.166","col6":"2"}, {"col1":"41","col2":"Netherlands","col3":"168.4","col4":"48","col5":"0.322","col6":"2"}, {"col1":"42","col2":"Chile","col3":"166.7","col4":"54","col5":"0.12","col6":""}, {"col1":"43","col2":"Saudi Arabia","col3":"163.9","col4":"61","col5":"0.037","col6":""}, {"col1":"44","col2":"Australia","col3":"148.1","col4":"43","col5":"0.586","col6":"2"}, {"col1":"45","col2":"India","col3":"148","col4":"39","col5":"1.487","col6":""}, {"col1":"46","col2":"Philippines","col3":"146.1","col4":"63","col5":"0.02","col6":""}, {"col1":"47","col2":"Vanuatu","col3":"142.8","col4":"87","col5":"0.001","col6":""}, {"col1":"48","col2":"Ghana","col3":"139.2","col4":"67","col5":"0.01","col6":"2"}, {"col1":"49","col2":"Korea","col3":"124.3","col4":"44","col5":"0.302","col6":""}, {"col1":"50","col2":"US Virgin Islands","col3":"118.2","col4":"69","col5":"0.004","col6":""}, {"col1":"51","col2":"Samoa","col3":"117.5","col4":"86","col5":"0.001","col6":""}, {"col1":"52","col2":"Mexico","col3":"117.1","col4":"45","col5":"0.211","col6":""}, {"col1":"53","col2":"Norway","col3":"110.7","col4":"38","col5":"0.731","col6":"2"}, {"col1":"54","col2":"New Zealand","col3":"109.4","col4":"46","col5":"0.129","col6":""}, {"col1":"55","col2":"Gibraltar","col3":"109.3","col4":"67","col5":"0.005","col6":"1"}, {"col1":"56","col2":"Sweden","col3":"100.9","col4":"36","col5":"1.006","col6":""}, {"col1":"57","col2":"Aruba","col3":"99.5","col4":"68","col5":"0.003","col6":"2"}, {"col1":"58","col2":"Italy","col3":"98.7","col4":"35","col5":"1.218","col6":""}, {"col1":"59","col2":"Latvia","col3":"92.8","col4":"45","col5":"0.113","col6":""}, {"col1":"60","col2":"Belize","col3":"92.5","col4":"79","col5":"0.001","col6":""}, {"col1":"61","col2":"South Africa","col3":"90.9","col4":"42","col5":"0.203","col6":""}, {"col1":"62","col2":"Botswana","col3":"90.6","col4":"71","col5":"0.002","col6":"2"}, {"col1":"63","col2":"Anguilla","col3":"89.4","col4":"69","col5":"0.002","col6":"1"}, {"col1":"64","col2":"St Vincent & the Grenadines","col3":"79.7","col4":"78","col5":"0","col6":"1"}, {"col1":"65","col2":"Antigua & Barbuda","col3":"79.6","col4":"81","col5":"0","col6":"1"}, {"col1":"66","col2":"Spain","col3":"77.5","col4":"33","col5":"1.09","col6":""}, {"col1":"67","col2":"Costa Rica","col3":"74.9","col4":"55","col5":"0.01","col6":""}, {"col1":"68","col2":"Turks & Caicos Islands","col3":"72.5","col4":"71","col5":"0.001","col6":"1"}, {"col1":"69","col2":"St Kitts & Nevis","col3":"68.4","col4":"78","col5":"0","col6":"1"}, {"col1":"70","col2":"Curacao","col3":"67.8","col4":"68","col5":"0.001","col6":"2"}, {"col1":"71","col2":"Iceland","col3":"67.1","col4":"46","col5":"0.035","col6":""}, {"col1":"72","col2":"Seychelles","col3":"60.8","col4":"71","col5":"0","col6":""}, {"col1":"73","col2":"Slovakia","col3":"60.1","col4":"50","col5":"0.011","col6":""}, {"col1":"74","col2":"Macedonia","col3":"59.5","col4":"66","col5":"0.001","col6":""}, {"col1":"75","col2":"Poland","col3":"57.2","col4":"36","col5":"0.172","col6":""}, {"col1":"76","col2":"Monaco","col3":"53.7","col4":"74","col5":"0","col6":""}, {"col1":"77","col2":"Estonia","col3":"52.9","col4":"44","col5":"0.023","col6":""}, {"col1":"78","col2":"Portugal (Madeira)","col3":"52.5","col4":"39","col5":"0.063","col6":"3"}, {"col1":"79","col2":"St Lucia","col3":"51.7","col4":"83","col5":"0","col6":"1"}, {"col1":"80","col2":"Brunei Darussalam","col3":"47.4","col4":"83","col5":"0","col6":"1"}, {"col1":"81","col2":"Czech Republic","col3":"44.2","col4":"35","col5":"0.105","col6":""}, {"col1":"82","col2":"Grenada","col3":"42.2","col4":"76","col5":"0","col6":"1"}, {"col1":"83","col2":"Denmark","col3":"38.2","col4":"31","col5":"0.219","col6":""}, {"col1":"84","col2":"Hungary","col3":"37.3","col4":"36","col5":"0.052","col6":""}, {"col1":"85","col2":"Greece","col3":"37.2","col4":"36","col5":"0.046","col6":""}, {"col1":"86","col2":"San Marino","col3":"33.3","col4":"70","col5":"0","col6":""}, {"col1":"87","col2":"Andorra","col3":"27.3","col4":"77","col5":"0","col6":""}, {"col1":"88","col2":"Slovenia","col3":"22.5","col4":"34","col5":"0.019","col6":""}, {"col1":"89","col2":"Dominica","col3":"21.3","col4":"76","col5":"0","col6":"1"}, {"col1":"90","col2":"Finland","col3":"19.4","col4":"31","col5":"0.025","col6":""}, {"col1":"91","col2":"Cook Islands","col3":"17.8","col4":"76","col5":"0","col6":"1"}, {"col1":"92","col2":"Montserrat","col3":"10.9","col4":"67","col5":"0","col6":"1"}, {"col1":"NA7","col2":"Bolivia","col3":"-","col4":"(72-80)","col5":"0.001","col6":""}, {"col1":"NA7","col2":"Dominican Republic","col3":"-","col4":"(65-73)","col5":"0.007","col6":""}, {"col1":"NA7","col2":"Gambia","col3":"-","col4":"(73-81)","col5":"0","col6":""}, {"col1":"NA7","col2":"Maldives","col3":"-","col4":"(76-84)","col5":"0","col6":""}, {"col1":"NA7","col2":"Montenegro","col3":"-","col4":"(60-68)","col5":"0.001","col6":""}, {"col1":"NA7","col2":"Paraguay","col3":"-","col4":"(75-83)","col5":"0.001","col6":""}, {"col1":"NA7","col2":"Taiwan","col3":"-","col4":"(67-75)","col5":"0.513","col6":""}, {"col1":"NA7","col2":"Tanzania","col3":"-","col4":"(73-81)","col5":"0.006","col6":""}, {"col1":"NA7","col2":"Venezuela","col3":"-","col4":"(64-72)","col5":"0.23","col6":""}, {"col1":"NA7","col2":"Nauru","col3":"-","col4":"78.9","col5":"","col6":""} ]

=========================
FSI 2013, .tsv

RANK	Secrecy Jurisdiction	FSI - Value	Secrecy Score	Global Scale Weight
1	Switzerland	1765.2	78	4.916
2	Luxembourg	1454.4	67	12.049
3	Hong Kong	1283.4	72	4.206
4	Cayman Islands	1233.5	70	4.694
5	Singapore	1216.8	70	4.280
6	USA	1212.9	58	22.586
7	Lebanon	747.8	79	0.354
8	Germany	738.3	59	4.326
9	Jersey	591.7	75	0.263
10	Japan	513.1	61	1.185
50	Norway	142.7	42	0.667
66	Denmark	63.1	33	0.605
71	Sweden	55.7	32	0.440